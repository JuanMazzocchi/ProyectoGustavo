<span id="inicio"></span> 
 {% include "header.html" %}
  <a  type="button" class="btn btn-danger" href="{{url_for('index')}}">Volver al menu principal</a>
  <a href="#inicio" class="btn btn-outline-warning"  id="irArriba">Arriba</a>

    <div class="container-fluid titulares">
        <div class="row justify-content-center">
          <div class="col-1">
           <p>Imagen</p>
          </div>
          <div class="col-1 mw-100 text-center">
            <p>Codigo</p>
          </div>
          <div class="col-4 text-center" >
            <p>Descripcion</p>
          </div>
          <div class="col-1 mw-100 text-center">
            <p>Precio</p>
          </div>
          <div class="col-1 mw-100 text-center">
            <p>Unidad</p>
          </div>
          <div class="col-2 mw-100 text-center">
            <p>Añadir</p>
          </div>
        </div>
    </div>
         
        
         <div style="background-image:url('/static/gunge-soft-wallpaper-texture.jpg');"  >
          
        {% for articulo in articulos %}
       
          <div class="row articulos justify-content-center listado item"  >
            <div class="col-1 contenedorDeImagenes">
             <p id="imagen" name="{{articulo[0]}}"> <img class="item-image" src="userpic/{{articulo[6]}}.jpg"  alt="userpic/{{articulo[6]}}.jpg" width="100%" ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 1500"  type="button" class="btn lupa" data-toggle="modal" data-target="#modal2" id="{{articulo[6]}}" name="{{articulo[3]}}" onclick="modal(event)"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"/></svg></p>
            </div>
            <div class="col-1 art mw-100 no-gutters text-center">
              <p  class="item-codigo">{{articulo[0]}}</p>
            </div>
            <div class="col-4 art no-gutters text-center"  >
              <p class="item-descripcionProducto ">{{articulo[3]}}</p>
            </div>
            <div class="col-1 art mw-100 no-gutters text-center">
              <p class="item-precioProducto">{{articulo[4]}}</p>
            </div>
            <div class="col-1 art mw-100 no-gutters text-center">
              <p class="item-unidadDeVenta">{{articulo[5]}}</p>
            </div>
            <div class="col-2 art mw-100 no-gutters text-center">
             <input type="number" value="0" class='cantidadDefault' id={{articulo[0]}} > <button class="btn btn-success btnAñadirAlCarrito" title="Añadir Producto">+</button> 
            </div>
        </div>
      
      
        {% endfor %}
      </div> 
      <div class="modal fade" id="modal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle"></h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <img src="" alt="" id="imagenModal2" width="100%">
            </div>
           
          </div>
        </div>
      </div>
<script>




var imagenes=document.querySelectorAll("#imagen")
var array=[]
//var arrayCodi=[]
for (let e=0; e<imagenes.length ; e++){array.push(imagenes[e].innerHTML )};
//for (let e=0; e<imagenes.length ; e++){arrayCodi.push({ima:imagenes[e].innerHTML, codi:imagenes[e].getAttribute('name')})};
console.log(array)
//console.log(arrayCodi)

var unicas= [...new Set(array)]
console.log("imagenes unicas son: "+ unicas.length+  " y son estas " +unicas)
for(let e=0; e<imagenes.length ; e++){
  //console.log(imagenes[e].innerHTML);
  console.log(unicas.includes(imagenes[e].innerHTML));
  if (unicas.includes(imagenes[e].innerHTML)==true){
    //var img=document.querySelector("#imagen");
    imagenes[e].setAttribute("id","visible");
    unicas = unicas.filter(function(i) { return i !== imagenes[e].innerHTML });
    console.log("unicas que quedan: "+unicas)
  }else{
   console.log("repetida")
   continue
   
} 
  };

  var myElement=document.querySelectorAll('.cantidadDefault');
  if(myElement.length!=0){
      
     var productoLS;
     if(localStorage.getItem('productos')=== null){
           productoLS = [];
       }
       else {
           productoLS = JSON.parse(localStorage.getItem('productos'));
       };

      let codigos=document.querySelectorAll('.item-codigo');

      productoLS.forEach(element => {
          for (let i = 0; i < codigos.length; i++) {
             if(element.id===codigos[i].textContent){
              myElement[i].value=element.cantidad;
             // console.log("cambiando cantidad");
              break

              }else{continue}
              
          }
          
      });}



</script>

{% include "footer.html" %}

